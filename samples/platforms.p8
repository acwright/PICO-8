pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
--platforms
--by aaron wright

function _init()
	x=10
 y=10
 dy=0
 dx=0
 
 on_ground=false
 
 jump=0
end

function _update60()
	dy=dy+0.05
  
  if btn(0) then
    dx=dx-0.05
  end
  
  if btn(1) then
    dx=dx+0.05
  end
  
  if btnp(2) and 
    (on_ground or jump<2) then
    on_ground=false
    jump+=1
    dy=dy-2
  end
  
  if hit(x+dx,y,7,7) then
    dx=0
  end
  
  if hit(x,y+dy,7,7) then
    if dy>0 then
      on_ground=true
    end
    dy=0        
  end
  
  if on_ground then
    dx=dx*0.95
    jump=0
  end
  
  y=y+dy
  x=x+dx
  x=mid(0,x,120)
end

function _draw()
	cls()
	map(0,0,0,0,16,16)
	spr(5,x,y)
end
-->8
--collision

function hit(x,y,w,h)
  collide=false
  for i=x,x+w,w do
    if (fget(mget(i/8,y/8))>0) or
       		(fget(mget(i/8,(y+h)/8))>0) then
          collide=true
    end
  end
  
  for i=y,y+h,h do
    if (fget(mget(x/8,i/8))>0) or
         (fget(mget((x+w)/8,i/8))>0) then
          collide=true
    end
  end
  
  return collide
end
__gfx__
0000000000660666666066666660660000000000eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000006550555555055555550556000000000e888888200000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070065000055550000555500005600000000e888888200000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700050066050050660050506600500000000e888888200000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000556000000655000006550000000000e888888200000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070060050066660050066600500600000000e888888200000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066000655556000655560006600000000e888888200000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000065660555555066555550665600000000e222222200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000655505555550555555505556000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000655505555550555555505556000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000650000555500005555000056000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000600660500506600505066006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005560000006550000065500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000600500666600500666005006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000660006555560006555600066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000656605555550665555506656000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000655505555550555555505556000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000655505555550555555505556000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000650000555500005555000056000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000600660500506600505066006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005560000006550000065500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000500660000500066005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006550000000055600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000005550000000055500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001010100000000000000000000000000010101000000000000000000000000000101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000010203000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000111213000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000212223000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000001030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000021230000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000102030000000000000000010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001112130000000000000000111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202021212020202020202020202121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212121212121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
